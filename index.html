<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dolanan Matematika â€” permainan strategi matematika seru untuk anak-anak! Latih penjumlahan dan perkalian sambil bermain.">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Dolanan Matematika â€” Permainan Strategi Matematika">
    <meta property="og:description" content="Permainan strategi papan matematika seru untuk anak-anak! Latih penjumlahan dan perkalian sambil bermain bersama teman atau melawan AI.">
    <meta property="og:image" content="favicon.svg">

    <title>Dolanan Matematika</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/style.css?v=4">
</head>
<body>
    <!-- ==================== HOME SCREEN ==================== -->
    <main id="home-screen" class="screen active">
        <div class="home-container">
            <h1 class="game-title">ğŸ² Dolanan Matematika</h1>
            <p class="home-subtitle">Pilih Permainan</p>

            <div class="game-grid">
                <button class="game-tile" id="tile-penjumlahan">
                    <span class="tile-icon">â•</span>
                    <span class="tile-title">Rumah Penjumlahan</span>
                    <span class="tile-desc">Permainan Strategi Penjumlahan</span>
                </button>
                <button class="game-tile" id="tile-perkalian">
                    <span class="tile-icon">âœ–ï¸</span>
                    <span class="tile-title">Rumah Perkalian</span>
                    <span class="tile-desc">Permainan Strategi Perkalian</span>
                </button>
            </div>

            <button class="secondary-btn how-to-play-btn" id="how-to-play-btn">ğŸ“– Cara Bermain</button>
        </div>
    </main>

    <!-- ==================== MENU SCREEN ==================== -->
    <div id="menu-screen" class="screen">
        <div class="menu-container">
            <h1 class="game-title">â• Rumah Penjumlahan</h1>
            <p class="game-subtitle">Permainan Strategi Penjumlahan</p>

            <div class="menu-form">
                <div class="input-group">
                    <label for="player1-name">Nama Pemain 1 (Biru)</label>
                    <input type="text" id="player1-name" placeholder="Pemain 1" maxlength="15">
                </div>

                <div class="mode-selection">
                    <h3>Pilih Mode</h3>
                    <div class="mode-buttons">
                        <button class="mode-btn selected" data-mode="pvp">
                            <span class="mode-icon">ğŸ‘¥</span>
                            <span class="mode-label">PvP Lokal</span>
                        </button>
                        <button class="mode-btn" data-mode="ai">
                            <span class="mode-icon">ğŸ¤–</span>
                            <span class="mode-label">vs AI</span>
                        </button>
                    </div>
                </div>

                <div class="timer-selection">
                    <h3>Batas Waktu per Giliran</h3>
                    <div class="timer-buttons">
                        <button class="timer-btn" data-time="15">15 detik</button>
                        <button class="timer-btn selected" data-time="30">30 detik</button>
                        <button class="timer-btn" data-time="60">60 detik</button>
                        <button class="timer-btn" data-time="0">âˆ Tanpa Batas</button>
                    </div>
                </div>

                <div class="input-group" id="player2-input">
                    <label for="player2-name">Nama Pemain 2 (Merah)</label>
                    <input type="text" id="player2-name" placeholder="Pemain 2" maxlength="15">
                </div>

                <button id="start-btn" class="primary-btn">Mulai Permainan</button>
                <button id="back-home-btn" class="secondary-btn back-home-btn">â† Kembali ke Beranda</button>
            </div>
        </div>
    </div>

    <!-- ==================== COIN TOSS SCREEN ==================== -->
    <div id="coin-screen" class="screen">
        <div class="coin-container">
            <h2>Lempar Koin</h2>
            <p class="coin-instruction" id="coin-instruction">Pemain 1, pilih sisi koin:</p>

            <div class="coin-wrapper">
                <div class="coin" id="coin">
                    <div class="coin-face coin-head">H</div>
                    <div class="coin-face coin-tail">T</div>
                </div>
            </div>

            <div class="coin-choices" id="coin-choices">
                <button class="coin-btn" data-choice="head">
                    <span>ğŸª™</span> Head
                </button>
                <button class="coin-btn" data-choice="tail">
                    <span>ğŸª™</span> Tail
                </button>
            </div>

            <div class="coin-result" id="coin-result" style="display:none;">
                <p id="coin-result-text"></p>
                <button id="coin-continue-btn" class="primary-btn">Lanjutkan</button>
            </div>
        </div>
    </div>

    <!-- ==================== INITIAL PLACEMENT SCREEN ==================== -->
    <div id="placement-screen" class="screen">
        <div class="placement-container">
            <h2 id="placement-title">Penempatan Awal</h2>
            <p id="placement-instruction"></p>

            <div class="placement-board-wrapper">
                <div class="addition-board-section">
                    <h3>Board Penjumlahan</h3>
                    <div class="addition-board" id="placement-addition-board"></div>
                </div>
            </div>

            <button id="placement-confirm-btn" class="primary-btn" style="display:none;">Konfirmasi Penempatan</button>
        </div>
    </div>

    <!-- ==================== GAME SCREEN ==================== -->
    <div id="game-screen" class="screen">
        <div class="game-layout">
            <!-- Player Info Bar -->
            <div class="player-bar">
                <div class="player-info player1-info" id="player1-info">
                    <div class="player-pion pion-blue"></div>
                    <span class="player-name-display" id="p1-name-display">Pemain 1</span>
                    <span class="player-score" id="p1-score">0 pion</span>
                </div>
                <div class="turn-center">
                    <div class="turn-indicator" id="turn-indicator" aria-live="polite">Giliran: Pemain 1</div>
                    <div class="turn-timer" id="turn-timer" style="display:none;">â± <span id="timer-value">30</span>s</div>
                </div>
                <div class="player-info player2-info" id="player2-info">
                    <div class="player-pion pion-red"></div>
                    <span class="player-name-display" id="p2-name-display">Pemain 2</span>
                    <span class="player-score" id="p2-score">0 pion</span>
                </div>
            </div>

            <!-- Sum Display -->
            <div class="sum-display" id="sum-display">
                Jumlah: <span id="sum-value">â€”</span>
            </div>

            <!-- Game Board (10x10) -->
            <div class="game-board-wrapper">
                <div class="game-board" id="game-board" role="grid" aria-label="Papan Permainan Penjumlahan"></div>
            </div>

            <!-- Addition Board (2x10) -->
            <div class="addition-board-section game-addition">
                <h3>Board Penjumlahan</h3>
                <div class="addition-board" id="game-addition-board"></div>
            </div>

            <!-- Phase Instruction -->
            <div class="phase-instruction" id="phase-instruction" aria-live="polite">
                Gerakkan pion Anda di Board Penjumlahan
            </div>
        </div>
    </div>

    <!-- ==================== MENU SCREEN (PERKALIAN) ==================== -->
    <div id="menu-screen-mult" class="screen">
        <div class="menu-container">
            <h1 class="game-title">âœ–ï¸ Rumah Perkalian</h1>
            <p class="game-subtitle">Permainan Strategi Perkalian</p>

            <div class="menu-form">
                <div class="input-group">
                    <label for="player1-name-mult">Nama Pemain 1 (Biru)</label>
                    <input type="text" id="player1-name-mult" placeholder="Pemain 1" maxlength="15">
                </div>

                <div class="mode-selection">
                    <h3>Pilih Mode</h3>
                    <div class="mode-buttons">
                        <button class="mode-btn selected" data-mode="pvp">
                            <span class="mode-icon">ğŸ‘¥</span>
                            <span class="mode-label">PvP Lokal</span>
                        </button>
                        <button class="mode-btn" data-mode="ai">
                            <span class="mode-icon">ğŸ¤–</span>
                            <span class="mode-label">vs AI</span>
                        </button>
                    </div>
                </div>

                <div class="timer-selection">
                    <h3>Batas Waktu per Giliran</h3>
                    <div class="timer-buttons">
                        <button class="timer-btn" data-time="15">15 detik</button>
                        <button class="timer-btn selected" data-time="30">30 detik</button>
                        <button class="timer-btn" data-time="60">60 detik</button>
                        <button class="timer-btn" data-time="0">âˆ Tanpa Batas</button>
                    </div>
                </div>

                <div class="input-group" id="player2-input-mult">
                    <label for="player2-name-mult">Nama Pemain 2 (Merah)</label>
                    <input type="text" id="player2-name-mult" placeholder="Pemain 2" maxlength="15">
                </div>

                <button id="start-btn-mult" class="primary-btn">Mulai Permainan</button>
                <button id="back-home-btn-mult" class="secondary-btn back-home-btn">â† Kembali ke Beranda</button>
            </div>
        </div>
    </div>

    <!-- ==================== COIN TOSS SCREEN (PERKALIAN) ==================== -->
    <div id="coin-screen-mult" class="screen">
        <div class="coin-container">
            <h2>Lempar Koin</h2>
            <p class="coin-instruction" id="coin-instruction-mult">Pemain 1, pilih sisi koin:</p>

            <div class="coin-wrapper">
                <div class="coin" id="coin-mult">
                    <div class="coin-face coin-head">H</div>
                    <div class="coin-face coin-tail">T</div>
                </div>
            </div>

            <div class="coin-choices" id="coin-choices-mult">
                <button class="coin-btn" data-choice="head">
                    <span>ğŸª™</span> Head
                </button>
                <button class="coin-btn" data-choice="tail">
                    <span>ğŸª™</span> Tail
                </button>
            </div>

            <div class="coin-result" id="coin-result-mult" style="display:none;">
                <p id="coin-result-text-mult"></p>
                <button id="coin-continue-btn-mult" class="primary-btn">Lanjutkan</button>
            </div>
        </div>
    </div>

    <!-- ==================== INITIAL PLACEMENT SCREEN (PERKALIAN) ==================== -->
    <div id="placement-screen-mult" class="screen">
        <div class="placement-container">
            <h2 id="placement-title-mult">Penempatan Awal</h2>
            <p id="placement-instruction-mult"></p>

            <div class="placement-board-wrapper">
                <div class="multiplication-board-section">
                    <h3>Board Perkalian</h3>
                    <div class="multiplication-board" id="placement-multiplication-board"></div>
                </div>
            </div>

            <button id="placement-confirm-btn-mult" class="primary-btn" style="display:none;">Konfirmasi Penempatan</button>
        </div>
    </div>

    <!-- ==================== GAME SCREEN (PERKALIAN) ==================== -->
    <div id="game-screen-mult" class="screen">
        <div class="game-layout">
            <!-- Player Info Bar -->
            <div class="player-bar">
                <div class="player-info player1-info" id="player1-info-mult">
                    <div class="player-pion pion-blue"></div>
                    <span class="player-name-display" id="p1-name-display-mult">Pemain 1</span>
                    <span class="player-score" id="p1-score-mult">0 pion</span>
                </div>
                <div class="turn-center">
                    <div class="turn-indicator" id="turn-indicator-mult" aria-live="polite">Giliran: Pemain 1</div>
                    <div class="turn-timer" id="turn-timer-mult" style="display:none;">â± <span id="timer-value-mult">30</span>s</div>
                </div>
                <div class="player-info player2-info" id="player2-info-mult">
                    <div class="player-pion pion-red"></div>
                    <span class="player-name-display" id="p2-name-display-mult">Pemain 2</span>
                    <span class="player-score" id="p2-score-mult">0 pion</span>
                </div>
            </div>

            <!-- Product Display -->
            <div class="sum-display" id="product-display-mult">
                Hasil Kali: <span id="product-value-mult">â€”</span>
            </div>

            <!-- Game Board (10x10) -->
            <div class="game-board-wrapper">
                <div class="game-board" id="game-board-mult" role="grid" aria-label="Papan Permainan Perkalian"></div>
            </div>

            <!-- Multiplication Board (2x9) -->
            <div class="multiplication-board-section game-multiplication">
                <h3>Board Perkalian</h3>
                <div class="multiplication-board" id="game-multiplication-board"></div>
            </div>

            <!-- Phase Instruction -->
            <div class="phase-instruction" id="phase-instruction-mult" aria-live="polite">
                Gerakkan pion Anda di Board Perkalian
            </div>
        </div>
    </div>

    <!-- ==================== WIN OVERLAY ==================== -->
    <div id="win-overlay" class="overlay" style="display:none;">
        <div class="win-content">
            <h2 id="win-title">ğŸ‰ Selamat!</h2>
            <p id="win-message"></p>
            <div class="win-buttons">
                <button id="play-again-btn" class="primary-btn">Main Lagi</button>
                <button id="back-menu-btn" class="secondary-btn">Kembali ke Menu</button>
            </div>
        </div>
    </div>

    <!-- ==================== DRAW / NO MOVES OVERLAY ==================== -->
    <div id="draw-overlay" class="overlay" style="display:none;">
        <div class="win-content">
            <h2 id="draw-title">ğŸ˜ Tidak Ada Langkah</h2>
            <p id="draw-message">Tidak ada cell tersedia untuk hasil penjumlahan ini.</p>
            <button id="draw-continue-btn" class="primary-btn">Lanjutkan</button>
            <div id="draw-gameover-buttons" class="win-buttons" style="display:none;">
                <button id="draw-play-again-btn" class="primary-btn">Main Lagi</button>
                <button id="draw-back-menu-btn" class="secondary-btn">Kembali ke Menu</button>
            </div>
        </div>
    </div>

    <!-- ==================== HOW TO PLAY MODAL ==================== -->
    <div id="how-to-play-overlay" class="overlay" style="display:none;">
        <div class="how-to-play-content">
            <button class="htp-close-btn" id="htp-close-btn" aria-label="Tutup">âœ•</button>
            <h2>ğŸ“– Cara Bermain</h2>

            <div class="htp-body">
                <div class="htp-section">
                    <h3>ğŸ¯ Tujuan</h3>
                    <p>Susun <strong>4 pion berjajar</strong> di papan permainan â€” bisa mendatar, tegak, atau diagonal. Pemain pertama yang berhasil menang!</p>
                </div>

                <div class="htp-section">
                    <h3>ğŸª™ Awal Permainan</h3>
                    <p>Lempar koin untuk menentukan siapa yang mulai duluan. Pemenang koin menempatkan <strong>kedua pion</strong> di board kecil.</p>
                </div>

                <div class="htp-section">
                    <h3>ğŸ® Cara Main</h3>
                    <ol>
                        <li><strong>Gerakkan pion</strong> kamu di board kecil (penjumlahan atau perkalian) ke angka yang berbeda.</li>
                        <li>Angka pada kedua pion akan <strong>dijumlahkan</strong> (â•) atau <strong>dikalikan</strong> (âœ–ï¸).</li>
                        <li>Pilih salah satu kotak di papan besar yang nilainya <strong>sama dengan hasilnya</strong>.</li>
                        <li>Kotak itu jadi milikmu! Gantian dengan lawan.</li>
                    </ol>
                </div>

                <div class="htp-section">
                    <h3>âš¡ Aturan Penting</h3>
                    <ul>
                        <li>Giliran pertama: pemenang koin boleh gerakkan pion <strong>manapun</strong>.</li>
                        <li>Giliran selanjutnya: kamu hanya bisa gerakkan pion <strong>milikmu sendiri</strong>.</li>
                        <li>Ada batas waktu per giliran â€” kalau habis, kamu <strong>otomatis kalah</strong>!</li>
                        <li>Kalau kamu pilih angka yang tidak ada di papan padahal ada pilihan lain, kamu <strong>otomatis kalah</strong>!</li>
                    </ul>
                </div>

                <div class="htp-section">
                    <h3>ğŸ’¡ Tips</h3>
                    <p>Pikirkan 2 langkah ke depan â€” angka yang kamu pilih juga menentukan pilihan lawanmu!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== HELP BUTTON (FLOATING) ==================== -->
    <button class="floating-help-btn" id="floating-help-btn" aria-label="Cara Bermain" style="display:none;">â“</button>

    <!-- ==================== SOUND TOGGLE (FLOATING) ==================== -->
    <button class="sound-toggle-btn" id="sound-toggle-btn" aria-label="Suara">ğŸ”Š</button>

    <script src="js/sounds.js?v=1"></script>
    <script src="js/game.js?v=3"></script>
    <script src="js/ai.js?v=3"></script>
    <script src="js/ui.js?v=5"></script>
    <script src="js/game-perkalian.js?v=1"></script>
    <script src="js/ai-perkalian.js?v=1"></script>
    <script src="js/ui-perkalian.js?v=2"></script>
</body>
</html>
